# Example docker-compose override file for development
# Copy this to docker-compose.override.yml and modify as needed

version: '3.8'

services:
  postgres:
    ports:
      - "5433:5432"  # Use different port to avoid conflicts
    environment:
      POSTGRES_DB: coding_contest_dev_db
      POSTGRES_USER: dev_user
      POSTGRES_PASSWORD: dev_password

  backend:
    environment:
      - SPRING_PROFILES_ACTIVE=development
      - DB_NAME=coding_contest_dev_db
      - DB_USERNAME=dev_user
      - DB_PASSWORD=dev_password
      - JWT_SECRET=development-secret-key-not-for-production
    volumes:
      - ./backend/src:/app/src:ro  # Mount source for hot reload
    ports:
      - "8081:8080"  # Use different port for development

  frontend:
    environment:
      - NODE_ENV=development
      - NEXT_PUBLIC_API_URL=http://localhost:8081/api
    volumes:
      - ./frontend/src:/app/src:ro  # Mount source for hot reload
      - ./frontend/public:/app/public:ro
    ports:
      - "3001:3000"  # Use different port for development

  # Development tools
  adminer:
    image: adminer
    restart: always
    ports:
      - "8082:8080"
    depends_on:
      - postgres
    profiles:
      - development
